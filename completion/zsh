#TODO: fallback

if [[ ! -o interactive ]]; then
    return
fi
_manage_completions() {
    local word words completions
    read -cA words
    word="${words[2]}"

    if [ "${#words}" -eq 2 ]; then
        completions="$(manage completion)"
    else
        completions="$(manage completion "${word}" "${words[@]:3}")"

        [ ! -n "${completions}" ] && return 1
    fi

    reply=("${(ps:\n:)completions}")
}
